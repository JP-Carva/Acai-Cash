@if (mostraModalDetalheVenda) {
<div class="card flex justify-center" >
    <p-dialog header="Detalhe da Venda #{{ vendaSelecionada.id }} - {{ vendaSelecionada.dataVenda | date:'dd/MM/yyyy' }}" [modal]="true" [(visible)]="mostraModalDetalheVenda" [style]="{ 'min-width': '50vw' }">

        <div class="mb-4">
            <table class="w-full table-auto">
            <thead class="border-b-1 border-gray-200 pb-2">
                <tr class="text-left">
                    <th class="py-2">Produto</th>
                    <th class="py-2">Peso (kg)</th>
                    <th class="py-2">Pre√ßo/kg</th>
                    <th class="py-2">Subtotal</th>
                </tr>
            </thead>
            <tbody>
                @for (item of itensVenda; track $index) {
                <tr>
                    <td class="py-2">{{ item.produto.nome }}</td>
                    <td class="py-2">{{ item.peso | number:'1.3-3' }}</td>
                    <td class="py-2">{{ item.produto.preco | currency:'BRL':'symbol':'1.2-2' }}</td>
                    <td class="py-2">{{ subtotalItem(item) | currency:'BRL':'symbol':'1.2-2' }}</td>
                </tr>
                }
                @if ((itensVenda || []).length === 0) {
                    <tr>
                        <td colspan="4" class="py-4 text-center text-sm text-muted">Nenhum item encontrado.</td>
                    </tr>
                }
            </tbody>
        </table>
        </div>

        <div class="mt-8 mb-4">
            <table class="w-full table-auto">
                <thead class="border-b-1 border-gray-200 pb-2">
                    <tr class="text-left">
                        <th class="py-2">Tipo de Pagamento</th>
                        <th class="py-2">Valor</th>
                    </tr>
                </thead>
                <tbody>
                    @for (item of pagamentosVenda; track $index) {
                    <tr>
                        <td class="py-2">{{ item.formaPagamento }}</td>
                        <td class="py-2">{{ (item.valorPago || 0) | currency:'BRL':'symbol':'1.2-2' }}</td>
                        <td class="py-2"></td>
                    </tr>
                    }
                    @if ((pagamentosVenda || []).length === 0) {
                        <tr>
                            <td colspan="3" class="py-4 text-center text-sm text-muted">Nenhum pagamento registrado.</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <div class="mt-8 mb-8 flex justify-center gap-8">
            <span class="font-semibold text-3xl">Total Pago: {{ totalPagamentos() | currency:'BRL':'symbol':'1.2-2' }}</span>
        </div>

        <div class="flex justify-end gap-2">
            <p-button label="Fechar" (click)="fecharModal()"></p-button>
        </div>
    </p-dialog>
</div>
}