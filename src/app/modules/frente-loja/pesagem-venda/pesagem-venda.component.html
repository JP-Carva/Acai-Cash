<p-fluid>
<div class="font-semibold text-xl mb-4">Nova Venda</div>

<form [formGroup]="vendaForm"></form>
<div class="xl:col-span-12 gap-2 flex flex-wrap">
    <div>
        <label for="produtoSelecionado">Selecione o produto</label>
    </div>
    <p-select class="xl:col-span-12" [options]="produtos" 
            [(ngModel)]="produtoSelecionado" 
            optionLabel="nome" 
            width="100%"
            [showClear]="true" 
            placeholder="Selecione um produto" 
            class="w-full" 
    />
</div>

<div class="xl:col-span-12 gap-2 mt-10">
    <p-inputgroup>
        <p-inputnumber
            [(ngModel)]="peso"
            placeholder="Peso"
            [maxFractionDigits]="5"
            mode="decimal"
            [useGrouping]="false"/>
        <p-inputgroup-addon>KG</p-inputgroup-addon>
    </p-inputgroup>
</div>

<div class="card text-xl">
    @if(produtoSelecionado && produtoSelecionado.preco) {
        <div class="flex gap-2">
            {{ peso | number:'1.3-5'}} × {{ produtoSelecionado.preco | currency:'BRL':'symbol':'1.2-2' }}/kg
            = <strong>{{ subtotal | currency:'BRL':'symbol':'1.2-2' }}</strong>
        </div>
    }
    @else{
        <div class="text-xl text-muted">Selecione um produto e informe o peso para ver o cálculo...</div>
    }
</div>

<div class="flex justify-end gap-4">
        <p-button type="submit" (click)="adicionarAoCarrinho()" label="Adicionar ao Carrinho" />
        <p-button type="submit" (click)="limpar()" label="Limpar" severity="secondary"/>
        </div>
</p-fluid>