<div class="card widget-table">
  <div class="flex items-center justify-between mb-4">
    <div class="font-semibold text-xl mb-4">Lista de Produtos</div>
    <p-button type="button" iconPos="right" icon="pi pi-plus" label="Novo" (click)="cadastrarProduto()"/>
  </div>
  <p-table
    #dt
    [lazy]="true"
    [first]="page.pageable.offset"
    [value]="produtos" 
    (onPage)="loadPage($event)"
    dataKey="id" 
    [totalRecords]="page.totalElements"
    styleClass="p-datatable-customers" 
    [rowHover]="true" 
    [rows]="page.pageable.pageSize"
    size="small"
    [rowsPerPageOptions]="[5, 10, 25, 50]"
    [paginator]="true"
    [showCurrentPageReport]="true"
    (onSort)="customSort($event)"
    currentPageReportTemplate="Exibindo {first} a {last} de {totalRecords} entradas"
    >

    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="nome">
          <div class="flex items-center gap-2">
            Nome 
            <p-sortIcon field="nome"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="preco">
          <div class="flex items-center gap-2">
            Preço 
            <p-sortIcon field="preco"></p-sortIcon>    
          </div>
        </th>
        <th pSortableColumn="categoria">
          <div class="flex items-center gap-2">
          Categoria 
          <p-sortIcon field="categoria"></p-sortIcon>
          </div>
        </th>
        <th pSortableColumn="ativo">
          <div class="flex items-center gap-2">
            Ativo/Inativo 
            <p-sortIcon field="ativo"></p-sortIcon>
          </div>
        </th>
        <th>
          <div class="flex items-center gap-2">
            Ações
          </div>
        </th>
      </tr>
    </ng-template>
    <ng-template #body let-produto>
      <tr>
        <td style="min-width: 15rem">
          <span class="image-text" style="margin-left: 0.5em; align-content: centers; ">
            <img [src]="produto.photoView" width="35" preview class="rounded-full"/>
            <div class="flex flex-col">
            <span class="image-text">{{ produto.name }}</span>
            </div>
          </span>
        </td>
         <td style="min-width: 14rem">
                <span class="image-text" style="margin-left: 0.5em; align-content: centers; ">
                  R$ {{ produto.preco}}
                </span>
            </td>
            <td style="min-width: 14rem">
              {{ produto.categoria }}
            </td>
            <td style="min-width: 14rem">
              {{ produto.ativo ? 'Ativo' : 'Inativo' }}
            </td>
            <td style="width: 9rem">
              <button pButton text icon="pi pi-pencil" class="!w-6 !h-6 mr-2" (click)="editarProduto(produto)"></button>
              <button pButton text icon="pi pi-trash" class="!w-6 !h-6" (click)="onDialogDeleteShow(produto)"></button>
            </td>
      </tr>
    </ng-template>

    </p-table>
</div>